!function($,window){"use strict";function appendRow(row){function exists(item){return that.identifier&&item[that.identifier]===row[that.identifier]}var that=this;return this.rows.contains(exists)?!1:(this.rows.push(row),!0)}function findFooterAndHeaderItems(selector){var footer=this.footer?this.footer.find(selector):$(),header=this.header?this.header.find(selector):$();return $.merge(footer,header)}function getParams(context){return context?$.extend({},this.cachedParams,{ctx:context}):this.cachedParams}function getRequest(){var request={current:this.current,rowCount:this.rowCount,sort:this.sortDictionary,searchPhrase:this.searchPhrase},post=this.options.post;return post=$.isFunction(post)?post():post,this.options.requestHandler($.extend(!0,request,post))}function getCssSelector(css){return"."+$.trim(css).replace(/\s+/gm,".")}function getUrl(){var url=this.options.url;return $.isFunction(url)?url():url}function init(){this.element.trigger("initialize"+namespace),loadColumns.call(this),this.selection=this.options.selection&&null!=this.identifier,loadRows.call(this),prepareTable.call(this),renderTableHeader.call(this),renderSearchField.call(this),renderActions.call(this),loadData.call(this),this.element.trigger("initialized"+namespace)}function highlightAppendedRows(){this.options.highlightRows}function isVisible(column){return column.visible}function loadColumns(){var that=this,firstHeadRow=this.element.find("thead > tr").first(),sorted=!1;firstHeadRow.children().each(function(){var $this=$(this),data=$this.data(),column={id:data.columnId,identifier:null==that.identifier&&data.identifier||!1,converter:that.options.converters[data.converter||data.type]||that.options.converters.string,text:$this.text(),align:data.align||"left",headerAlign:data.headerAlign||"left",cssClass:data.cssClass||"",headerCssClass:data.headerCssClass||"",formatter:that.options.formatters[data.formatter]||null,order:sorted||"asc"!==data.order&&"desc"!==data.order?null:data.order,searchable:!(data.searchable===!1),sortable:!(data.sortable===!1),visible:!(data.visible===!1),visibleInSelection:!(data.visibleInSelection===!1),width:$.isNumeric(data.width)?data.width+"px":"string"==typeof data.width?data.width:null};that.columns.push(column),null!=column.order&&(that.sortDictionary[column.id]=column.order),column.identifier&&(that.identifier=column.id,that.converter=column.converter),that.options.multiSort||null===column.order||(sorted=!0)})}function loadData(){function containsPhrase(row){for(var column,searchPattern=new RegExp(that.searchPhrase,that.options.caseSensitive?"g":"gi"),i=0;i<that.columns.length;i++)if(column=that.columns[i],column.searchable&&column.visible&&column.converter.to(row[column.id]).search(searchPattern)>-1)return!0;return!1}function update(rows,total){that.currentRows=rows,setTotals.call(that,total),that.options.keepSelection||(that.selectedRows=[]),renderRows.call(that,rows),renderInfos.call(that),renderPagination.call(that),that.element._bgBusyAria(!1).trigger("loaded"+namespace)}var that=this;if(this.element._bgBusyAria(!0).trigger("load"+namespace),showLoading.call(this),this.options.ajax){var request=getRequest.call(this),url=getUrl.call(this);if(null==url||"string"!=typeof url||0===url.length)throw new Error("Url setting must be a none empty string or a function that returns one.");this.xqr&&this.xqr.abort();var settings={url:url,data:request,success:function(response){that.xqr=null,"string"==typeof response&&(response=$.parseJSON(response)),response=that.options.responseHandler(response),that.current=response.current,update(response.rows,response.total)},error:function(jqXHR,textStatus){that.xqr=null,"abort"!==textStatus&&(renderNoResultsRow.call(that),that.element._bgBusyAria(!1).trigger("loaded"+namespace))}};settings=$.extend(this.options.ajaxSettings,settings),this.xqr=$.ajax(settings)}else{var rows=this.searchPhrase.length>0?this.rows.where(containsPhrase):this.rows,total=rows.length;-1!==this.rowCount&&(rows=rows.page(this.current,this.rowCount)),window.setTimeout(function(){update(rows,total)},10)}}function loadRows(){if(!this.options.ajax){var that=this,rows=this.element.find("tbody > tr");rows.each(function(){var $this=$(this),cells=$this.children("td"),row={};$.each(that.columns,function(i,column){row[column.id]=column.converter.from(cells.eq(i).html())}),appendRow.call(that,row)}),setTotals.call(this,this.rows.length),sortRows.call(this)}}function setTotals(total){this.total=total,this.totalPages=-1===this.rowCount?1:Math.ceil(this.total/this.rowCount)}function prepareTable(){var tpl=this.options.templates,wrapper=this.element.parent().hasClass(this.options.css.responsiveTable)?this.element.parent():this.element;this.element.addClass(this.options.css.table),0===this.element.children("tbody").length&&this.element.append(tpl.body),1&this.options.navigation&&(this.header=$(tpl.header.resolve(getParams.call(this,{id:this.element._bgId()+"-header"}))),wrapper.before(this.header)),2&this.options.navigation&&(this.footer=$(tpl.footer.resolve(getParams.call(this,{id:this.element._bgId()+"-footer"}))),wrapper.after(this.footer))}function renderActions(){if(0!==this.options.navigation){var css=this.options.css,selector=getCssSelector(css.actions),actionItems=findFooterAndHeaderItems.call(this,selector);if(actionItems.length>0){var that=this,tpl=this.options.templates,actions=$(tpl.actions.resolve(getParams.call(this)));if(this.options.ajax){var refreshIcon=tpl.icon.resolve(getParams.call(this,{iconCss:css.iconRefresh})),refresh=$(tpl.actionButton.resolve(getParams.call(this,{content:refreshIcon,text:this.options.labels.refresh}))).on("click"+namespace,function(e){e.stopPropagation(),that.current=1,loadData.call(that)});actions.append(refresh)}renderRowCountSelection.call(this,actions),renderColumnSelection.call(this,actions),replacePlaceHolder.call(this,actionItems,actions)}}}function renderColumnSelection(actions){if(this.options.columnSelection&&this.columns.length>1){var that=this,css=this.options.css,tpl=this.options.templates,icon=tpl.icon.resolve(getParams.call(this,{iconCss:css.iconColumns})),dropDown=$(tpl.actionDropDown.resolve(getParams.call(this,{content:icon}))),selector=getCssSelector(css.dropDownItem),checkboxSelector=getCssSelector(css.dropDownItemCheckbox),itemsSelector=getCssSelector(css.dropDownMenuItems);$.each(this.columns,function(i,column){if(column.visibleInSelection){var item=$(tpl.actionDropDownCheckboxItem.resolve(getParams.call(that,{name:column.id,label:column.text,checked:column.visible}))).on("click"+namespace,selector,function(e){e.stopPropagation();var $this=$(this),checkbox=$this.find(checkboxSelector);if(!checkbox.prop("disabled")){column.visible=checkbox.prop("checked");var enable=that.columns.where(isVisible).length>1;$this.parents(itemsSelector).find(selector+":has("+checkboxSelector+":checked)")._bgEnableAria(enable).find(checkboxSelector)._bgEnableField(enable),that.element.find("tbody").empty(),renderTableHeader.call(that),loadData.call(that)}});dropDown.find(getCssSelector(css.dropDownMenuItems)).append(item)}}),actions.append(dropDown)}}function renderInfos(){if(0!==this.options.navigation){var selector=getCssSelector(this.options.css.infos),infoItems=findFooterAndHeaderItems.call(this,selector);if(infoItems.length>0){var end=this.current*this.rowCount,infos=$(this.options.templates.infos.resolve(getParams.call(this,{end:0===this.total||-1===end||end>this.total?this.total:end,start:0===this.total?0:end-this.rowCount+1,total:this.total})));replacePlaceHolder.call(this,infoItems,infos)}}}function renderNoResultsRow(){var tbody=this.element.children("tbody").first(),tpl=this.options.templates,count=this.columns.where(isVisible).length;this.selection&&(count+=1),tbody.html(tpl.noResults.resolve(getParams.call(this,{columns:count})))}function renderPagination(){if(0!==this.options.navigation){var selector=getCssSelector(this.options.css.pagination),paginationItems=findFooterAndHeaderItems.call(this,selector)._bgShowAria(-1!==this.rowCount);if(-1!==this.rowCount&&paginationItems.length>0){var tpl=this.options.templates,current=this.current,totalPages=this.totalPages,pagination=$(tpl.pagination.resolve(getParams.call(this))),offsetRight=totalPages-current,offsetLeft=-1*(this.options.padding-current),startWith=offsetRight>=this.options.padding?Math.max(offsetLeft,1):Math.max(offsetLeft-this.options.padding+offsetRight,1),maxCount=2*this.options.padding+1,count=totalPages>=maxCount?maxCount:totalPages;renderPaginationItem.call(this,pagination,"first","<i class='zmdi zmdi-more-horiz'></i>","first")._bgEnableAria(current>1),renderPaginationItem.call(this,pagination,"prev","<i class='zmdi zmdi-chevron-left'></i>","prev")._bgEnableAria(current>1);for(var i=0;count>i;i++){var pos=i+startWith;renderPaginationItem.call(this,pagination,pos,pos,"page-"+pos)._bgEnableAria()._bgSelectAria(pos===current)}0===count&&renderPaginationItem.call(this,pagination,1,1,"page-1")._bgEnableAria(!1)._bgSelectAria(),renderPaginationItem.call(this,pagination,"next","<i class='zmdi zmdi-chevron-right'></i>","next")._bgEnableAria(totalPages>current),renderPaginationItem.call(this,pagination,"last","<i class='zmdi zmdi-more-horiz'></i>","last")._bgEnableAria(totalPages>current),replacePlaceHolder.call(this,paginationItems,pagination)}}}function renderPaginationItem(list,page,text,markerCss){var that=this,tpl=this.options.templates,css=this.options.css,values=getParams.call(this,{css:markerCss,text:text,page:page}),item=$(tpl.paginationItem.resolve(values)).on("click"+namespace,getCssSelector(css.paginationButton),function(e){e.stopPropagation(),e.preventDefault();var $this=$(this),parent=$this.parent();if(!parent.hasClass("active")&&!parent.hasClass("disabled")){var commandList={first:1,prev:that.current-1,next:that.current+1,last:that.totalPages},command=$this.data("page");that.current=commandList[command]||command,loadData.call(that)}$this.trigger("blur")});return list.append(item),item}function renderRowCountSelection(actions){function getText(value){return-1===value?that.options.labels.all:value}var that=this,rowCountList=this.options.rowCount;if($.isArray(rowCountList)){var css=this.options.css,tpl=this.options.templates,dropDown=$(tpl.actionDropDown.resolve(getParams.call(this,{content:getText(this.rowCount)}))),menuSelector=getCssSelector(css.dropDownMenu),menuTextSelector=getCssSelector(css.dropDownMenuText),menuItemsSelector=getCssSelector(css.dropDownMenuItems),menuItemSelector=getCssSelector(css.dropDownItemButton);$.each(rowCountList,function(index,value){var item=$(tpl.actionDropDownItem.resolve(getParams.call(that,{text:getText(value),action:value})))._bgSelectAria(value===that.rowCount).on("click"+namespace,menuItemSelector,function(e){e.preventDefault();var $this=$(this),newRowCount=$this.data("action");newRowCount!==that.rowCount&&(that.current=1,that.rowCount=newRowCount,$this.parents(menuItemsSelector).children().each(function(){var $item=$(this),currentRowCount=$item.find(menuItemSelector).data("action");$item._bgSelectAria(currentRowCount===newRowCount)}),$this.parents(menuSelector).find(menuTextSelector).text(getText(newRowCount)),loadData.call(that))});dropDown.find(menuItemsSelector).append(item)}),actions.append(dropDown)}}function renderRows(rows){if(rows.length>0){var that=this,css=this.options.css,tpl=this.options.templates,tbody=this.element.children("tbody").first(),allRowsSelected=!0,html="";$.each(rows,function(index,row){var cells="",rowAttr=' data-row-id="'+(null==that.identifier?index:row[that.identifier])+'"',rowCss="";if(that.selection){var selected=-1!==$.inArray(row[that.identifier],that.selectedRows),selectBox=tpl.select.resolve(getParams.call(that,{type:"checkbox",value:row[that.identifier],checked:selected}));cells+=tpl.cell.resolve(getParams.call(that,{content:selectBox,css:css.selectCell})),allRowsSelected=allRowsSelected&&selected,selected&&(rowCss+=css.selected,rowAttr+=' aria-selected="true"')}var status=null!=row.status&&that.options.statusMapping[row.status];status&&(rowCss+=status),$.each(that.columns,function(j,column){if(column.visible){var value=$.isFunction(column.formatter)?column.formatter.call(that,column,row):column.converter.to(row[column.id]),cssClass=column.cssClass.length>0?" "+column.cssClass:"";cells+=tpl.cell.resolve(getParams.call(that,{content:null==value||""===value?"&nbsp;":value,css:("right"===column.align?css.right:"center"===column.align?css.center:css.left)+cssClass,style:null==column.width?"":"width:"+column.width+";"}))}}),rowCss.length>0&&(rowAttr+=' class="'+rowCss+'"'),html+=tpl.row.resolve(getParams.call(that,{attr:rowAttr,cells:cells}))}),that.element.find("thead "+getCssSelector(that.options.css.selectBox)).prop("checked",allRowsSelected),tbody.html(html),registerRowEvents.call(this,tbody)}else renderNoResultsRow.call(this)}function registerRowEvents(tbody){var that=this,selectBoxSelector=getCssSelector(this.options.css.selectBox);this.selection&&tbody.off("click"+namespace,selectBoxSelector).on("click"+namespace,selectBoxSelector,function(e){e.stopPropagation();var $this=$(this),id=that.converter.from($this.val());$this.prop("checked")?that.select([id]):that.deselect([id])}),tbody.off("click"+namespace,"> tr").on("click"+namespace,"> tr",function(e){e.stopPropagation();var $this=$(this),id=null==that.identifier?$this.data("row-id"):that.converter.from($this.data("row-id")+""),row=null==that.identifier?that.currentRows[id]:that.currentRows.first(function(item){return item[that.identifier]===id});that.selection&&that.options.rowSelect&&($this.hasClass(that.options.css.selected)?that.deselect([id]):that.select([id])),that.element.trigger("click"+namespace,[that.columns,row])})}function renderSearchField(){if(0!==this.options.navigation){var css=this.options.css,selector=getCssSelector(css.search),searchItems=findFooterAndHeaderItems.call(this,selector);if(searchItems.length>0){var that=this,tpl=this.options.templates,timer=null,currentValue="",searchFieldSelector=getCssSelector(css.searchField),search=$(tpl.search.resolve(getParams.call(this))),searchField=search.is(searchFieldSelector)?search:search.find(searchFieldSelector);searchField.on("keyup"+namespace,function(e){e.stopPropagation();var newValue=$(this).val();(currentValue!==newValue||13===e.which&&""!==newValue)&&(currentValue=newValue,(13===e.which||0===newValue.length||newValue.length>=that.options.searchSettings.characters)&&(window.clearTimeout(timer),timer=window.setTimeout(function(){executeSearch.call(that,newValue)},that.options.searchSettings.delay)))}),replacePlaceHolder.call(this,searchItems,search)}}}function executeSearch(phrase){this.searchPhrase!==phrase&&(this.current=1,this.searchPhrase=phrase,loadData.call(this))}function renderTableHeader(){var that=this,headerRow=this.element.find("thead > tr"),css=this.options.css,tpl=this.options.templates,html="",sorting=this.options.sorting;if(this.selection){var selectBox=this.options.multiSelect?tpl.select.resolve(getParams.call(that,{type:"checkbox",value:"all"})):"";html+=tpl.rawHeaderCell.resolve(getParams.call(that,{content:selectBox,css:css.selectCell}))}if($.each(this.columns,function(index,column){if(column.visible){var sortOrder=that.sortDictionary[column.id],iconCss=sorting&&sortOrder&&"asc"===sortOrder?css.iconUp:sorting&&sortOrder&&"desc"===sortOrder?css.iconDown:"",icon=tpl.icon.resolve(getParams.call(that,{iconCss:iconCss})),align=column.headerAlign,cssClass=column.headerCssClass.length>0?" "+column.headerCssClass:"";html+=tpl.headerCell.resolve(getParams.call(that,{column:column,icon:icon,sortable:sorting&&column.sortable&&css.sortable||"",css:("right"===align?css.right:"center"===align?css.center:css.left)+cssClass,style:null==column.width?"":"width:"+column.width+";"}))}}),headerRow.html(html),sorting){var sortingSelector=getCssSelector(css.sortable);headerRow.off("click"+namespace,sortingSelector).on("click"+namespace,sortingSelector,function(e){e.preventDefault(),setTableHeaderSortDirection.call(that,$(this)),sortRows.call(that),loadData.call(that)})}if(this.selection&&this.options.multiSelect){var selectBoxSelector=getCssSelector(css.selectBox);headerRow.off("click"+namespace,selectBoxSelector).on("click"+namespace,selectBoxSelector,function(e){e.stopPropagation(),$(this).prop("checked")?that.select():that.deselect()})}}function setTableHeaderSortDirection(element){var css=this.options.css,iconSelector=getCssSelector(css.icon),columnId=element.data("column-id")||element.parents("th").first().data("column-id"),sortOrder=this.sortDictionary[columnId],icon=element.find(iconSelector);if(this.options.multiSort||(element.parents("tr").first().find(iconSelector).removeClass(css.iconDown+" "+css.iconUp),this.sortDictionary={}),sortOrder&&"asc"===sortOrder)this.sortDictionary[columnId]="desc",icon.removeClass(css.iconUp).addClass(css.iconDown);else if(sortOrder&&"desc"===sortOrder)if(this.options.multiSort){var newSort={};for(var key in this.sortDictionary)key!==columnId&&(newSort[key]=this.sortDictionary[key]);this.sortDictionary=newSort,icon.removeClass(css.iconDown)}else this.sortDictionary[columnId]="asc",icon.removeClass(css.iconDown).addClass(css.iconUp);else this.sortDictionary[columnId]="asc",icon.addClass(css.iconUp)}function replacePlaceHolder(placeholder,element){placeholder.each(function(index,item){$(item).before(element.clone(!0)).remove()})}function showLoading(){var that=this;window.setTimeout(function(){if("true"===that.element._bgAria("busy")){var tpl=that.options.templates,thead=that.element.children("thead").first(),tbody=that.element.children("tbody").first(),firstCell=tbody.find("tr > td").first(),padding=that.element.height()-thead.height()-(firstCell.height()+20),count=that.columns.where(isVisible).length;that.selection&&(count+=1),tbody.html(tpl.loading.resolve(getParams.call(that,{columns:count}))),-1!==that.rowCount&&padding>0&&tbody.find("tr > td").css("padding","20px 0 "+padding+"px")}},250)}function sortRows(){function sort(x,y,current){function sortOrder(value){return"asc"===item.order?value:-1*value}current=current||0;var next=current+1,item=sortArray[current];return x[item.id]>y[item.id]?sortOrder(1):x[item.id]<y[item.id]?sortOrder(-1):sortArray.length>next?sort(x,y,next):0}var sortArray=[];if(!this.options.ajax){for(var key in this.sortDictionary)(this.options.multiSort||0===sortArray.length)&&sortArray.push({id:key,order:this.sortDictionary[key]});sortArray.length>0&&this.rows.sort(sort)}}var namespace=".rs.jquery.bootgrid",Grid=function(element,options){this.element=$(element),this.origin=this.element.clone(),this.options=$.extend(!0,{},Grid.defaults,this.element.data(),options);var rowCount=this.options.rowCount=this.element.data().rowCount||options.rowCount||this.options.rowCount;this.columns=[],this.current=1,this.currentRows=[],this.identifier=null,this.selection=!1,this.converter=null,this.rowCount=$.isArray(rowCount)?rowCount[0]:rowCount,this.rows=[],this.searchPhrase="",this.selectedRows=[],this.sortDictionary={},this.total=0,this.totalPages=0,this.cachedParams={lbl:this.options.labels,css:this.options.css,ctx:{}},this.header=null,this.footer=null,this.xqr=null};if(Grid.defaults={navigation:3,padding:2,columnSelection:!0,rowCount:[10,25,50,-1],selection:!1,multiSelect:!1,rowSelect:!1,keepSelection:!1,highlightRows:!1,sorting:!0,multiSort:!1,searchSettings:{delay:250,characters:1},ajax:!1,ajaxSettings:{method:"POST"},post:{},url:"",caseSensitive:!0,requestHandler:function(request){return request},responseHandler:function(response){return response},converters:{numeric:{from:function(value){return+value},to:function(value){return value+""}},string:{from:function(value){return value},to:function(value){return value}}},css:{actions:"actions btn-group",center:"text-center",columnHeaderAnchor:"column-header-anchor",columnHeaderText:"text",dropDownItem:"dropdown-item",dropDownItemButton:"dropdown-item-button",dropDownItemCheckbox:"dropdown-item-checkbox",dropDownMenu:"dropdown btn-group",dropDownMenuItems:"dropdown-menu pull-right",dropDownMenuText:"dropdown-text",footer:"bootgrid-footer container-fluid",header:"bootgrid-header container-fluid",icon:"icon glyphicon",iconColumns:"glyphicon-th-list",iconDown:"glyphicon-chevron-down",iconRefresh:"glyphicon-refresh",iconSearch:"glyphicon-search",iconUp:"glyphicon-chevron-up",infos:"infos",left:"text-left",pagination:"pagination",paginationButton:"button",responsiveTable:"table-responsive",right:"text-right",search:"search form-group",searchField:"search-field form-control",selectBox:"select-box",selectCell:"select-cell",selected:"active",sortable:"sortable",table:"bootgrid-table table"},formatters:{},labels:{all:"All",infos:"Showing {{ctx.start}} to {{ctx.end}} of {{ctx.total}} entries",loading:"Loading...",noResults:"No results found!",refresh:"Refresh",search:"Search"},statusMapping:{0:"success",1:"info",2:"warning",3:"danger"},templates:{actionButton:'<button class="btn btn-default" type="button" title="{{ctx.text}}">{{ctx.content}}</button>',actionDropDown:'<div class="{{css.dropDownMenu}}"><button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown"><span class="{{css.dropDownMenuText}}">{{ctx.content}}</span> <span class="caret"></span></button><ul class="{{css.dropDownMenuItems}}" role="menu"></ul></div>',actionDropDownItem:'<li><a data-action="{{ctx.action}}" class="{{css.dropDownItem}} {{css.dropDownItemButton}}">{{ctx.text}}</a></li>',actionDropDownCheckboxItem:'<li><div class="checkbox"><label class="{{css.dropDownItem}}"><input name="{{ctx.name}}" type="checkbox" value="1" class="{{css.dropDownItemCheckbox}}" {{ctx.checked}} /> {{ctx.label}}<i class="input-helper"></i></label></div></li>',actions:'<div class="{{css.actions}}"></div>',body:"<tbody></tbody>",cell:'<td class="{{ctx.css}}" style="{{ctx.style}}">{{ctx.content}}</td>',footer:'<div id="{{ctx.id}}" class="{{css.footer}}"><div class="row"><div class="col-sm-6"><p class="{{css.pagination}}"></p></div><div class="col-sm-6 infoBar"><p class="{{css.infos}}"></p></div></div></div>',header:'<div id="{{ctx.id}}" class="{{css.header}}"><div class="row"><div class="col-sm-12 actionBar"><p class="{{css.search}}"></p><p class="{{css.actions}}"></p></div></div></div>',headerCell:'<th data-column-id="{{ctx.column.id}}" class="{{ctx.css}}" style="{{ctx.style}}"><a href="javascript:void(0);" class="{{css.columnHeaderAnchor}} {{ctx.sortable}}"><span class="{{css.columnHeaderText}}">{{ctx.column.text}}</span>{{ctx.icon}}</a></th>',icon:'<span class="{{css.icon}} {{ctx.iconCss}}"></span>',infos:'<div class="{{css.infos}}">{{lbl.infos}}</div>',loading:'<tr><td colspan="{{ctx.columns}}" class="loading">{{lbl.loading}}</td></tr>',noResults:'<tr><td colspan="{{ctx.columns}}" class="no-results">{{lbl.noResults}}</td></tr>',pagination:'<ul class="{{css.pagination}}"></ul>',paginationItem:'<li class="{{ctx.css}}"><a data-page="{{ctx.page}}" class="{{css.paginationButton}}">{{ctx.text}}</a></li>',rawHeaderCell:'<th class="{{ctx.css}}">{{ctx.content}}</th>',row:"<tr{{ctx.attr}}>{{ctx.cells}}</tr>",search:'<div class="{{css.search}}"><div class="input-group"><span class="{{css.icon}} input-group-addon {{css.iconSearch}}"></span> <input type="text" class="{{css.searchField}}" placeholder="{{lbl.search}}" /></div></div>',select:'<div class="checkbox"><label><input name="select" type="{{ctx.type}}" class="{{css.selectBox}}" value="{{ctx.value}}" {{ctx.checked}} /><i class="input-helper"></i></label></div>'}},Grid.prototype.append=function(rows){if(this.options.ajax);else{for(var appendedRows=[],i=0;i<rows.length;i++)appendRow.call(this,rows[i])&&appendedRows.push(rows[i]);sortRows.call(this),highlightAppendedRows.call(this,appendedRows),loadData.call(this),this.element.trigger("appended"+namespace,[appendedRows])}return this},Grid.prototype.clear=function(){if(this.options.ajax);else{var removedRows=$.extend([],this.rows);this.rows=[],this.current=1,this.total=0,loadData.call(this),this.element.trigger("cleared"+namespace,[removedRows])}return this},Grid.prototype.destroy=function(){return $(window).off(namespace),1&this.options.navigation&&this.header.remove(),2&this.options.navigation&&this.footer.remove(),this.element.before(this.origin).remove(),this},Grid.prototype.reload=function(){return loadData.call(this),this},Grid.prototype.remove=function(rowIds){if(null!=this.identifier){if(this.options.ajax);else{rowIds=rowIds||this.selectedRows;for(var id,removedRows=[],i=0;i<rowIds.length;i++){id=rowIds[i];for(var j=0;j<this.rows.length;j++)if(this.rows[j][this.identifier]===id){removedRows.push(this.rows[j]),this.rows.splice(j,1);break}}this.current=1,loadData.call(this),this.element.trigger("removed"+namespace,[removedRows])}}return this},Grid.prototype.search=function(phrase){if(phrase=phrase||"",this.searchPhrase!==phrase){var selector=getCssSelector(this.options.css.searchField),searchFields=findFooterAndHeaderItems.call(this,selector);searchFields.val(phrase)}return executeSearch.call(this,phrase),this},Grid.prototype.select=function(rowIds){if(this.selection){rowIds=rowIds||this.currentRows.propValues(this.identifier);for(var id,i,selectedRows=[];rowIds.length>0&&(this.options.multiSelect||1!==selectedRows.length);)if(id=rowIds.pop(),-1===$.inArray(id,this.selectedRows))for(i=0;i<this.currentRows.length;i++)if(this.currentRows[i][this.identifier]===id){selectedRows.push(this.currentRows[i]),this.selectedRows.push(id);break}if(selectedRows.length>0){var selectBoxSelector=getCssSelector(this.options.css.selectBox),selectMultiSelectBox=this.selectedRows.length>=this.currentRows.length;for(i=0;!this.options.keepSelection&&selectMultiSelectBox&&i<this.currentRows.length;)selectMultiSelectBox=-1!==$.inArray(this.currentRows[i++][this.identifier],this.selectedRows);for(this.element.find("thead "+selectBoxSelector).prop("checked",selectMultiSelectBox),this.options.multiSelect||this.element.find("tbody > tr "+selectBoxSelector+":checked").trigger("click"+namespace),i=0;i<this.selectedRows.length;i++)this.element.find('tbody > tr[data-row-id="'+this.selectedRows[i]+'"]').addClass(this.options.css.selected)._bgAria("selected","true").find(selectBoxSelector).prop("checked",!0);this.element.trigger("selected"+namespace,[selectedRows])}}return this},Grid.prototype.deselect=function(rowIds){if(this.selection){rowIds=rowIds||this.currentRows.propValues(this.identifier);for(var id,i,pos,deselectedRows=[];rowIds.length>0;)if(id=rowIds.pop(),pos=$.inArray(id,this.selectedRows),-1!==pos)for(i=0;i<this.currentRows.length;i++)if(this.currentRows[i][this.identifier]===id){deselectedRows.push(this.currentRows[i]),this.selectedRows.splice(pos,1);break}if(deselectedRows.length>0){var selectBoxSelector=getCssSelector(this.options.css.selectBox);for(this.element.find("thead "+selectBoxSelector).prop("checked",!1),i=0;i<deselectedRows.length;i++)this.element.find('tbody > tr[data-row-id="'+deselectedRows[i][this.identifier]+'"]').removeClass(this.options.css.selected)._bgAria("selected","false").find(selectBoxSelector).prop("checked",!1);this.element.trigger("deselected"+namespace,[deselectedRows])}}return this},Grid.prototype.sort=function(dictionary){var values=dictionary?$.extend({},dictionary):{};return values===this.sortDictionary?this:(this.sortDictionary=values,renderTableHeader.call(this),sortRows.call(this),loadData.call(this),this)},Grid.prototype.getColumnSettings=function(){return $.merge([],this.columns)},Grid.prototype.getCurrentPage=function(){return this.current},Grid.prototype.getCurrentRows=function(){return $.merge([],this.currentRows)},Grid.prototype.getRowCount=function(){return this.rowCount},Grid.prototype.getSearchPhrase=function(){return this.searchPhrase},Grid.prototype.getSelectedRows=function(){return $.merge([],this.selectedRows)},Grid.prototype.getSortDictionary=function(){return $.extend({},this.sortDictionary)},Grid.prototype.getTotalPageCount=function(){return this.totalPages},Grid.prototype.getTotalRowCount=function(){return this.total},$.fn.extend({_bgAria:function(name,value){return value?this.attr("aria-"+name,value):this.attr("aria-"+name)},_bgBusyAria:function(busy){return null==busy||busy?this._bgAria("busy","true"):this._bgAria("busy","false")},_bgRemoveAria:function(name){return this.removeAttr("aria-"+name)},_bgEnableAria:function(enable){return null==enable||enable?this.removeClass("disabled")._bgAria("disabled","false"):this.addClass("disabled")._bgAria("disabled","true")},_bgEnableField:function(enable){return null==enable||enable?this.removeAttr("disabled"):this.attr("disabled","disable")},_bgShowAria:function(show){return null==show||show?this.show()._bgAria("hidden","false"):this.hide()._bgAria("hidden","true")},_bgSelectAria:function(select){return null==select||select?this.addClass("active")._bgAria("selected","true"):this.removeClass("active")._bgAria("selected","false")},_bgId:function(id){return id?this.attr("id",id):this.attr("id")}}),!String.prototype.resolve){var formatter={checked:function(value){return"boolean"==typeof value?value?'checked="checked"':"":value}};String.prototype.resolve=function(substitutes,prefixes){var result=this;return $.each(substitutes,function(key,value){if(null!=value&&"function"!=typeof value)if("object"==typeof value){var keys=prefixes?$.extend([],prefixes):[];keys.push(key),result=result.resolve(value,keys)+""}else{formatter&&formatter[key]&&"function"==typeof formatter[key]&&(value=formatter[key](value)),key=prefixes?prefixes.join(".")+"."+key:key;var pattern=new RegExp("\\{\\{"+key+"\\}\\}","gm");result=result.replace(pattern,value.replace?value.replace(/\$/gi,"&#36;"):value)}}),result}}Array.prototype.first||(Array.prototype.first=function(condition){for(var i=0;i<this.length;i++){var item=this[i];if(condition(item))return item}return null}),Array.prototype.contains||(Array.prototype.contains=function(condition){for(var i=0;i<this.length;i++){var item=this[i];if(condition(item))return!0}return!1}),Array.prototype.page||(Array.prototype.page=function(page,size){var skip=(page-1)*size,end=skip+size;return this.length>skip?this.length>end?this.slice(skip,end):this.slice(skip):[]}),Array.prototype.where||(Array.prototype.where=function(condition){for(var result=[],i=0;i<this.length;i++){var item=this[i];condition(item)&&result.push(item)}return result}),Array.prototype.propValues||(Array.prototype.propValues=function(propName){for(var result=[],i=0;i<this.length;i++)result.push(this[i][propName]);return result});var old=$.fn.bootgrid;$.fn.bootgrid=function(option){var args=Array.prototype.slice.call(arguments,1),returnValue=null,elements=this.each(function(index){var $this=$(this),instance=$this.data(namespace),options="object"==typeof option&&option;if((instance||"destroy"!==option)&&(instance||($this.data(namespace,instance=new Grid(this,options)),init.call(instance)),"string"==typeof option))if(0===option.indexOf("get")&&0===index)returnValue=instance[option].apply(instance,args);else if(0!==option.indexOf("get"))return instance[option].apply(instance,args)});return"string"==typeof option&&0===option.indexOf("get")?returnValue:elements},$.fn.bootgrid.Constructor=Grid,$.fn.bootgrid.noConflict=function(){return $.fn.bootgrid=old,this},$('[data-toggle="bootgrid"]').bootgrid()}(jQuery,window);